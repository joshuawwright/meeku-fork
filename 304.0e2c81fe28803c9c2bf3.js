(self.webpackChunkmeeku_fork=self.webpackChunkmeeku_fork||[]).push([[304],{8304:(ne,st,u)=>{"use strict";u.r(st),u.d(st,{STIMULUS_CASE:()=>Tt,StudyModule:()=>mc});var x=u(2057),s=u(4788),pt=u(2895),z=u(7639),M=u(9765),H=(u(6215),u(7574),u(6682),u(5435)),U=u(8307);const p={provide:s.tb,useFactory:function(e,i){return()=>{if((0,x.NF)(i)){const t=Array.from(e.querySelectorAll(`[class*=${S}]`)),n=/\bflex-layout-.+?\b/g;t.forEach(r=>{r.classList.contains(`${S}ssr`)&&r.parentNode?r.parentNode.removeChild(r):r.className.replace(n,"")})}}},deps:[x.K0,s.Lbi],multi:!0},S="flex-layout-";let R=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({providers:[p]}),e})();const Mt={addFlexToParent:!0,addOrientationBps:!1,disableDefaultBps:!1,disableVendorPrefixes:!1,serverLoaded:!1,useColumnBasisZero:!0,printWithBreakpoints:[],mediaTriggerAutoRestore:!0,ssrObserveBreakpoints:[]},Q=new s.OlP("Flex Layout token, config options for the library",{providedIn:"root",factory:()=>Mt}),ot=new s.OlP("FlexLayoutServerLoaded",{providedIn:"root",factory:()=>!1}),se=new s.OlP("Flex Layout token, collect all breakpoints into one provider",{providedIn:"root",factory:()=>null});u(9490),u(6782),u(1211);let Ke=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[[R]]}),e})();var Et=u(6794);let ti=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[[R,Et.vT]]}),e})(),ai=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[[R]]}),e})(),ae=(()=>{class e{constructor(t,n){(0,x.PM)(n)&&!t&&console.warn("Warning: Flex Layout loaded on the server without FlexLayoutServerModule")}static withConfig(t,n=[]){return{ngModule:e,providers:t.serverLoaded?[{provide:Q,useValue:Object.assign(Object.assign({},Mt),t)},{provide:se,useValue:n,multi:!0},{provide:ot,useValue:!0}]:[{provide:Q,useValue:Object.assign(Object.assign({},Mt),t)},{provide:se,useValue:n,multi:!0}]}}}return e.\u0275fac=function(t){return new(t||e)(s.LFG(ot),s.LFG(s.Lbi))},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[[ti,Ke,ai],ti,Ke,ai]}),e})();var lt=u(933),at=u(2414),dt=u(7935),bo=u(1439),Fo=u(5917),de=u(5257),To=u(9761),ue=u(9642),D=u(6083),di=u(3328),ui=u(2371);function Mo(e,i){}class ce{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus=!0,this.restoreFocus=!0,this.closeOnNavigation=!0}}const Ro={dialogContainer:(0,D.X$)("dialogContainer",[(0,D.SB)("void, exit",(0,D.oB)({opacity:0,transform:"scale(0.7)"})),(0,D.SB)("enter",(0,D.oB)({transform:"none"})),(0,D.eR)("* => enter",(0,D.jt)("150ms cubic-bezier(0, 0, 0.2, 1)",(0,D.oB)({transform:"none",opacity:1}))),(0,D.eR)("* => void, * => exit",(0,D.jt)("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",(0,D.oB)({opacity:0})))])};let Go=(()=>{class e extends at.en{constructor(t,n,r,o,l,a){super(),this._elementRef=t,this._focusTrapFactory=n,this._changeDetectorRef=r,this._config=l,this._focusMonitor=a,this._animationStateChanged=new s.vpe,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=c=>(this._portalOutlet.hasAttached(),this._portalOutlet.attachDomPortal(c)),this._ariaLabelledBy=l.ariaLabelledBy||null,this._document=o}_initializeWithAttachedContent(){this._setupFocusTrap(),this._capturePreviouslyFocusedElement(),this._focusDialogContainer()}attachComponentPortal(t){return this._portalOutlet.hasAttached(),this._portalOutlet.attachComponentPortal(t)}attachTemplatePortal(t){return this._portalOutlet.hasAttached(),this._portalOutlet.attachTemplatePortal(t)}_recaptureFocus(){this._containsFocus()||(!this._config.autoFocus||!this._focusTrap.focusInitialElement())&&this._elementRef.nativeElement.focus()}_trapFocus(){this._config.autoFocus?this._focusTrap.focusInitialElementWhenReady():this._containsFocus()||this._elementRef.nativeElement.focus()}_restoreFocus(){const t=this._elementFocusedBeforeDialogWasOpened;if(this._config.restoreFocus&&t&&"function"==typeof t.focus){const n=(0,ue.ht)(),r=this._elementRef.nativeElement;(!n||n===this._document.body||n===r||r.contains(n))&&(this._focusMonitor?(this._focusMonitor.focusVia(t,this._closeInteractionType),this._closeInteractionType=null):t.focus())}this._focusTrap&&this._focusTrap.destroy()}_setupFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement)}_capturePreviouslyFocusedElement(){this._document&&(this._elementFocusedBeforeDialogWasOpened=(0,ue.ht)())}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const t=this._elementRef.nativeElement,n=(0,ue.ht)();return t===n||t.contains(n)}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(s.SBq),s.Y36(ui.qV),s.Y36(s.sBO),s.Y36(x.K0,8),s.Y36(ce),s.Y36(ui.tE))},e.\u0275dir=s.lG2({type:e,viewQuery:function(t,n){if(1&t&&s.Gf(at.Pl,7),2&t){let r;s.iGM(r=s.CRH())&&(n._portalOutlet=r.first)}},features:[s.qOj]}),e})(),Eo=(()=>{class e extends Go{constructor(){super(...arguments),this._state="enter"}_onAnimationDone({toState:t,totalTime:n}){"enter"===t?(this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:n})):"exit"===t&&(this._restoreFocus(),this._animationStateChanged.next({state:"closed",totalTime:n}))}_onAnimationStart({toState:t,totalTime:n}){"enter"===t?this._animationStateChanged.next({state:"opening",totalTime:n}):("exit"===t||"void"===t)&&this._animationStateChanged.next({state:"closing",totalTime:n})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}}return e.\u0275fac=function(){let i;return function(n){return(i||(i=s.n5z(e)))(n||e)}}(),e.\u0275cmp=s.Xpm({type:e,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1","aria-modal","true",1,"mat-dialog-container"],hostVars:6,hostBindings:function(t,n){1&t&&s.WFA("@dialogContainer.start",function(o){return n._onAnimationStart(o)})("@dialogContainer.done",function(o){return n._onAnimationDone(o)}),2&t&&(s.Ikx("id",n._id),s.uIk("role",n._config.role)("aria-labelledby",n._config.ariaLabel?null:n._ariaLabelledBy)("aria-label",n._config.ariaLabel)("aria-describedby",n._config.ariaDescribedBy||null),s.d8E("@dialogContainer",n._state))},features:[s.qOj],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,n){1&t&&s.YNc(0,Mo,0,0,"ng-template",0)},directives:[at.Pl],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[Ro.dialogContainer]}}),e})(),Lo=0;class vt{constructor(i,t,n="mat-dialog-"+Lo++){this._overlayRef=i,this._containerInstance=t,this.id=n,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new M.xQ,this._afterClosed=new M.xQ,this._beforeClosed=new M.xQ,this._state=0,t._id=n,t._animationStateChanged.pipe((0,H.h)(r=>"opened"===r.state),(0,de.q)(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),t._animationStateChanged.pipe((0,H.h)(r=>"closed"===r.state),(0,de.q)(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),i.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._afterClosed.next(this._result),this._afterClosed.complete(),this.componentInstance=null,this._overlayRef.dispose()}),i.keydownEvents().pipe((0,H.h)(r=>r.keyCode===di.hY&&!this.disableClose&&!(0,di.Vb)(r))).subscribe(r=>{r.preventDefault(),ge(this,"keyboard")}),i.backdropClick().subscribe(()=>{this.disableClose?this._containerInstance._recaptureFocus():ge(this,"mouse")})}close(i){this._result=i,this._containerInstance._animationStateChanged.pipe((0,H.h)(t=>"closing"===t.state),(0,de.q)(1)).subscribe(t=>{this._beforeClosed.next(i),this._beforeClosed.complete(),this._overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),t.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._afterClosed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._overlayRef.backdropClick()}keydownEvents(){return this._overlayRef.keydownEvents()}updatePosition(i){let t=this._getPositionStrategy();return i&&(i.left||i.right)?i.left?t.left(i.left):t.right(i.right):t.centerHorizontally(),i&&(i.top||i.bottom)?i.top?t.top(i.top):t.bottom(i.bottom):t.centerVertically(),this._overlayRef.updatePosition(),this}updateSize(i="",t=""){return this._overlayRef.updateSize({width:i,height:t}),this._overlayRef.updatePosition(),this}addPanelClass(i){return this._overlayRef.addPanelClass(i),this}removePanelClass(i){return this._overlayRef.removePanelClass(i),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._overlayRef.dispose()}_getPositionStrategy(){return this._overlayRef.getConfig().positionStrategy}}function ge(e,i,t){return void 0!==e._containerInstance&&(e._containerInstance._closeInteractionType=i),e.close(t)}const Vt=new s.OlP("MatDialogData"),Oo=new s.OlP("mat-dialog-default-options"),ci=new s.OlP("mat-dialog-scroll-strategy"),Io={provide:ci,deps:[lt.aV],useFactory:function(e){return()=>e.scrollStrategies.block()}};let ko=(()=>{class e{constructor(t,n,r,o,l,a,c,y,b){this._overlay=t,this._injector=n,this._defaultOptions=r,this._parentDialog=o,this._overlayContainer=l,this._dialogRefConstructor=c,this._dialogContainerType=y,this._dialogDataToken=b,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new M.xQ,this._afterOpenedAtThisLevel=new M.xQ,this._ariaHiddenElements=new Map,this.afterAllClosed=(0,bo.P)(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe((0,To.O)(void 0))),this._scrollStrategy=a}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(t,n){(n=function(e,i){return Object.assign(Object.assign({},i),e)}(n,this._defaultOptions||new ce)).id&&this.getDialogById(n.id);const r=this._createOverlay(n),o=this._attachDialogContainer(r,n),l=this._attachDialogContent(t,o,r,n);return this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(l),l.afterClosed().subscribe(()=>this._removeOpenDialog(l)),this.afterOpened.next(l),o._initializeWithAttachedContent(),l}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(n=>n.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_createOverlay(t){const n=this._getOverlayConfig(t);return this._overlay.create(n)}_getOverlayConfig(t){const n=new lt.X_({positionStrategy:this._overlay.position().global(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(n.backdropClass=t.backdropClass),n}_attachDialogContainer(t,n){const o=s.zs3.create({parent:n&&n.viewContainerRef&&n.viewContainerRef.injector||this._injector,providers:[{provide:ce,useValue:n}]}),l=new at.C5(this._dialogContainerType,n.viewContainerRef,o,n.componentFactoryResolver);return t.attach(l).instance}_attachDialogContent(t,n,r,o){const l=new this._dialogRefConstructor(r,n,o.id);if(t instanceof s.Rgc)n.attachTemplatePortal(new at.UE(t,null,{$implicit:o.data,dialogRef:l}));else{const a=this._createInjector(o,l,n),c=n.attachComponentPortal(new at.C5(t,o.viewContainerRef,a));l.componentInstance=c.instance}return l.updateSize(o.width,o.height).updatePosition(o.position),l}_createInjector(t,n,r){const o=t&&t.viewContainerRef&&t.viewContainerRef.injector,l=[{provide:this._dialogContainerType,useValue:r},{provide:this._dialogDataToken,useValue:t.data},{provide:this._dialogRefConstructor,useValue:n}];return t.direction&&(!o||!o.get(Et.Is,null,s.XFs.Optional))&&l.push({provide:Et.Is,useValue:{value:t.direction,change:(0,Fo.of)()}}),s.zs3.create({parent:o||this._injector,providers:l})}_removeOpenDialog(t){const n=this.openDialogs.indexOf(t);n>-1&&(this.openDialogs.splice(n,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((r,o)=>{r?o.setAttribute("aria-hidden",r):o.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const t=this._overlayContainer.getContainerElement();if(t.parentElement){const n=t.parentElement.children;for(let r=n.length-1;r>-1;r--){let o=n[r];o!==t&&"SCRIPT"!==o.nodeName&&"STYLE"!==o.nodeName&&!o.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(o,o.getAttribute("aria-hidden")),o.setAttribute("aria-hidden","true"))}}}_closeDialogs(t){let n=t.length;for(;n--;)t[n].close()}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(lt.aV),s.Y36(s.zs3),s.Y36(void 0),s.Y36(void 0),s.Y36(lt.Xj),s.Y36(void 0),s.Y36(s.DyG),s.Y36(s.DyG),s.Y36(s.OlP))},e.\u0275dir=s.lG2({type:e}),e})(),tt=(()=>{class e extends ko{constructor(t,n,r,o,l,a,c){super(t,n,o,a,c,l,vt,Eo,Vt)}}return e.\u0275fac=function(t){return new(t||e)(s.LFG(lt.aV),s.LFG(s.zs3),s.LFG(x.Ye,8),s.LFG(Oo,8),s.LFG(ci),s.LFG(e,12),s.LFG(lt.Xj))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac}),e})(),No=0,Yo=(()=>{class e{constructor(t,n,r){this._dialogRef=t,this._elementRef=n,this._dialog=r,this.id="mat-dialog-title-"+No++}ngOnInit(){this._dialogRef||(this._dialogRef=function(e,i){let t=e.nativeElement.parentElement;for(;t&&!t.classList.contains("mat-dialog-container");)t=t.parentElement;return t?i.find(n=>n.id===t.id):null}(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{const t=this._dialogRef._containerInstance;t&&!t._ariaLabelledBy&&(t._ariaLabelledBy=this.id)})}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(vt,8),s.Y36(s.SBq),s.Y36(tt))},e.\u0275dir=s.lG2({type:e,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-dialog-title"],hostVars:1,hostBindings:function(t,n){2&t&&s.Ikx("id",n.id)},inputs:{id:"id"},exportAs:["matDialogTitle"]}),e})(),jo=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=s.lG2({type:e,selectors:[["","mat-dialog-actions",""],["mat-dialog-actions"],["","matDialogActions",""]],hostAttrs:[1,"mat-dialog-actions"]}),e})();let fe=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({providers:[tt,Io],imports:[[lt.U8,at.eL,dt.BQ],dt.BQ]}),e})(),Vo=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[[x.ez,dt.si]]}),e})(),Ho=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[[x.ez,dt.si]]}),e})(),Qo=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[[x.ez,ae]]}),e})(),fi=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[[x.ez,z.QW,Vo,Ho,Qo]]}),e})(),Wo=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[[x.ez,ae,fe,fi]]}),e})(),zo=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[[x.ez,dt.si]]}),e})(),Uo=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[[zo,x.ez,ae,fe,fi]]}),e})();var $o=u(7012);const hi=function(e){var i=e.length;return i?e[(0,$o.Z)(0,i-1)]:void 0};var Ko=u(2258);const Jo=function(e){return hi((0,Ko.Z)(e))};var he=u(4654);const Ot=function(e){return((0,he.Z)(e)?hi:Jo)(e)},me=["RWK","PGZ","QGK","FNK","ZVB","PWU","PLJ","KNF","GVW","KXL","GRQ","WPQ","BQP","FXX","ZTF","SGG","GQF","VXO","DZF","ZHD","JHH","VQP","JXY","ZVS","HGD","FJX","VHK","JTP","JTS","UHJ","WTZ","CXF","XFH","LWK","NWK","ZRG","FDG","NQC","WPW","YVR","HLJ","WBX","VGH","KXW","XAQ","WQG","DGJ","QUZ","QZX","HWL","DKX","ZDW","RZJ","VGJ","VWL","MKP","JFJ","GQY","BRX","IHG","YVP","SXG","FJC","QKU","WZY","QHJ","YTZ","RHF","YYB","QFH","ZUX","TQT","VZZ","BTQ","DHQ","XLW","VLW","VZJ","GGK","SWK","UFH","GPN","JSX","IQP","QUP","XDG","QWN","CBK","JVH","VXG","YBF","BVY","QZW","UPZ","WMX","XVN","RRX","QTX","DZN","WXP","BXK","QAK","UFJ","ZNS","WGG","WKX","CLX","QWC","KVF","CCK","VTM","BXN","FWK","HCQ","XOH","YQR","BJM","QTG","BLG","WVJ","QHQ","AQZ","ZKH","IQL","BJW","GFH","GCJ","GVY","XNP","ZBM","CWD","VTV","XQP","KCV","CLK","ZVL","VWN","KPK","PKF","MWK","ZHJ","IHN","XLP","UJW","YYW","KQC","WLK","QSX","YFW","QXR","QTC","SZJ","VNP","GJN","JWM","QXP","CCX","QKI","UJL","WZC","JBT","ZVZ","CBZ","JCG","WYU","XZF","KGN","ZBW","LBZ","MZZ","KNK","XRT","WTK","NQW","QLU","BHV","FNN","SXZ","QXF","FBF","YWM","SUQ","GJT","WVM","VJC","UWC","KZS","ZWB","XXK","XQO","MVG","YDZ","CZF","PJV","KQG","QVA","JQG","JNX","VJZ","ZMG"],mi={lower:"lower",upper:"upper"},tl=Object.values(mi);function h(e){const i=function(){const e=Ot(me);if(!e)throw Error('Random value returned "undefined"!');return e}();return function(e){const i=me.indexOf(e);me.splice(i,1)}(i),e===mi.lower?i.toLowerCase():i.toUpperCase()}var g=(()=>{return(e=g||(g={})).identity="identity",e.trained="trained",e.mutuallyEntailed="mutually entailed",e.combinatoriallyEntailed="combinatorially entailed",g;var e})();class m extends class{constructor(i,t){this.dest=t,this.src=i}toString(){return`${this.src}->${this.dest}`}}{constructor(i,t,n,r){super(i,t),this.relation=n,this.relationType=r}toString(){return`${this.src} ${this.relation} ${this.dest} (${this.relationType})`}}var ol=u(6224);const Ht=function(e,i){for(var t=e.length;t--;)if((0,ol.Z)(e[t][0],i))return t;return-1};var dl=Array.prototype.splice;function At(e){var i=-1,t=null==e?0:e.length;for(this.clear();++i<t;){var n=e[i];this.set(n[0],n[1])}}At.prototype.clear=function(){this.__data__=[],this.size=0},At.prototype.delete=function(e){var i=this.__data__,t=Ht(i,e);return!(t<0||(t==i.length-1?i.pop():dl.call(i,t,1),--this.size,0))},At.prototype.get=function(e){var i=this.__data__,t=Ht(i,e);return t<0?void 0:i[t][1]},At.prototype.has=function(e){return Ht(this.__data__,e)>-1},At.prototype.set=function(e,i){var t=this.__data__,n=Ht(t,e);return n<0?(++this.size,t.push([e,i])):t[n][1]=i,this};const Qt=At;var Ct=u(7699),ut=u(309);const Bt=(0,Ct.Z)(ut.Z,"Map"),It=(0,Ct.Z)(Object,"create");var Ol=Object.prototype.hasOwnProperty;var Pl=Object.prototype.hasOwnProperty;function wt(e){var i=-1,t=null==e?0:e.length;for(this.clear();++i<t;){var n=e[i];this.set(n[0],n[1])}}wt.prototype.clear=function(){this.__data__=It?It(null):{},this.size=0},wt.prototype.delete=function(e){var i=this.has(e)&&delete this.__data__[e];return this.size-=i?1:0,i},wt.prototype.get=function(e){var i=this.__data__;if(It){var t=i[e];return"__lodash_hash_undefined__"===t?void 0:t}return Ol.call(i,e)?i[e]:void 0},wt.prototype.has=function(e){var i=this.__data__;return It?void 0!==i[e]:Pl.call(i,e)},wt.prototype.set=function(e,i){var t=this.__data__;return this.size+=this.has(e)?0:1,t[e]=It&&void 0===i?"__lodash_hash_undefined__":i,this};const pi=wt,Wt=function(e,i){var t=e.__data__;return function(e){var i=typeof e;return"string"==i||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==e:null===e}(i)?t["string"==typeof i?"string":"hash"]:t.map};function _t(e){var i=-1,t=null==e?0:e.length;for(this.clear();++i<t;){var n=e[i];this.set(n[0],n[1])}}_t.prototype.clear=function(){this.size=0,this.__data__={hash:new pi,map:new(Bt||Qt),string:new pi}},_t.prototype.delete=function(e){var i=Wt(this,e).delete(e);return this.size-=i?1:0,i},_t.prototype.get=function(e){return Wt(this,e).get(e)},_t.prototype.has=function(e){return Wt(this,e).has(e)},_t.prototype.set=function(e,i){var t=Wt(this,e),n=t.size;return t.set(e,i),this.size+=t.size==n?0:1,this};const na=_t;function Dt(e){var i=this.__data__=new Qt(e);this.size=i.size}Dt.prototype.clear=function(){this.__data__=new Qt,this.size=0},Dt.prototype.delete=function(e){var i=this.__data__,t=i.delete(e);return this.size=i.size,t},Dt.prototype.get=function(e){return this.__data__.get(e)},Dt.prototype.has=function(e){return this.__data__.has(e)},Dt.prototype.set=function(e,i){var t=this.__data__;if(t instanceof Qt){var n=t.__data__;if(!Bt||n.length<199)return n.push([e,i]),this.size=++t.size,this;t=this.__data__=new na(n)}return t.set(e,i),this.size=t.size,this};const la=Dt;var xi=u(5427),ua=u(8893);const zt=function(e,i,t,n){var r=!t;t||(t={});for(var o=-1,l=i.length;++o<l;){var a=i[o],c=n?n(t[a],e[a],a,t,e):void 0;void 0===c&&(c=e[a]),r?(0,ua.Z)(t,a,c):(0,xi.Z)(t,a,c)}return t};var pe=u(3709);var ha=u(5154),xe=u(4214),yi=u(1550);var ya=Object.prototype.hasOwnProperty;const Aa=function(e){if(!(0,xe.Z)(e))return function(e){var i=[];if(null!=e)for(var t in Object(e))i.push(t);return i}(e);var i=(0,yi.Z)(e),t=[];for(var n in e)"constructor"==n&&(i||!ya.call(e,n))||t.push(n);return t};var Ca=u(8402);const ye=function(e){return(0,Ca.Z)(e)?(0,ha.Z)(e,!0):Aa(e)};var vi="object"==typeof exports&&exports&&!exports.nodeType&&exports,Ai=vi&&"object"==typeof module&&module&&!module.nodeType&&module,Ci=Ai&&Ai.exports===vi?ut.Z.Buffer:void 0,wi=Ci?Ci.allocUnsafe:void 0;var Ta=u(6889);const _i=function(){return[]};var La=Object.prototype.propertyIsEnumerable,Di=Object.getOwnPropertySymbols;const ve=Di?function(e){return null==e?[]:(e=Object(e),function(e,i){for(var t=-1,n=null==e?0:e.length,r=0,o=[];++t<n;){var l=e[t];i(l,t,e)&&(o[r++]=l)}return o}(Di(e),function(i){return La.call(e,i)}))}:_i,Si=function(e,i){for(var t=-1,n=i.length,r=e.length;++t<n;)e[r+t]=i[t];return e},bi=(0,u(4184).Z)(Object.getPrototypeOf,Object),Fi=Object.getOwnPropertySymbols?function(e){for(var i=[];e;)Si(i,ve(e)),e=bi(e);return i}:_i,Ti=function(e,i,t){var n=i(e);return(0,he.Z)(e)?n:Si(n,t(e))},za=function(e){return Ti(e,pe.Z,ve)},$a=function(e){return Ti(e,ye,Fi)},Ae=(0,Ct.Z)(ut.Z,"DataView"),Ce=(0,Ct.Z)(ut.Z,"Promise"),we=(0,Ct.Z)(ut.Z,"Set"),_e=(0,Ct.Z)(ut.Z,"WeakMap");var Mi=u(3369),St=u(2035),Ri="[object Map]",Gi="[object Promise]",Ei="[object Set]",Li="[object WeakMap]",Oi="[object DataView]",td=(0,St.Z)(Ae),ed=(0,St.Z)(Bt),id=(0,St.Z)(Ce),nd=(0,St.Z)(we),sd=(0,St.Z)(_e),ct=Mi.Z;(Ae&&ct(new Ae(new ArrayBuffer(1)))!=Oi||Bt&&ct(new Bt)!=Ri||Ce&&ct(Ce.resolve())!=Gi||we&&ct(new we)!=Ei||_e&&ct(new _e)!=Li)&&(ct=function(e){var i=(0,Mi.Z)(e),t="[object Object]"==i?e.constructor:void 0,n=t?(0,St.Z)(t):"";if(n)switch(n){case td:return Oi;case ed:return Ri;case id:return Gi;case nd:return Ei;case sd:return Li}return i});const De=ct;var od=Object.prototype.hasOwnProperty;const Bi=ut.Z.Uint8Array,Se=function(e){var i=new e.constructor(e.byteLength);return new Bi(i).set(new Bi(e)),i};var fd=/\w*$/;var Ii=u(5770),ki=Ii.Z?Ii.Z.prototype:void 0,Pi=ki?ki.valueOf:void 0;const Yd=function(e,i,t){var n=e.constructor;switch(i){case"[object ArrayBuffer]":return Se(e);case"[object Boolean]":case"[object Date]":return new n(+e);case"[object DataView]":return function(e,i){var t=i?Se(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.byteLength)}(e,t);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function(e,i){var t=i?Se(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.length)}(e,t);case"[object Map]":return new n;case"[object Number]":case"[object String]":return new n(e);case"[object RegExp]":return function(e){var i=new e.constructor(e.source,fd.exec(e));return i.lastIndex=e.lastIndex,i}(e);case"[object Set]":return new n;case"[object Symbol]":return function(e){return Pi?Object(Pi.call(e)):{}}(e)}};var Ni=Object.create;const Vd=function(){function e(){}return function(i){if(!(0,xe.Z)(i))return{};if(Ni)return Ni(i);e.prototype=i;var t=new e;return e.prototype=void 0,t}}();var Wd=u(5104),Yi=u(6539);var ji=u(1162),Ut=u(8514),Vi=Ut.Z&&Ut.Z.isMap;const Kd=Vi?(0,ji.Z)(Vi):function(e){return(0,Yi.Z)(e)&&"[object Map]"==De(e)};var Hi=Ut.Z&&Ut.Z.isSet;const eu=Hi?(0,ji.Z)(Hi):function(e){return(0,Yi.Z)(e)&&"[object Set]"==De(e)};var Qi="[object Arguments]",Wi="[object Function]",zi="[object Object]",F={};F[Qi]=F["[object Array]"]=F["[object ArrayBuffer]"]=F["[object DataView]"]=F["[object Boolean]"]=F["[object Date]"]=F["[object Float32Array]"]=F["[object Float64Array]"]=F["[object Int8Array]"]=F["[object Int16Array]"]=F["[object Int32Array]"]=F["[object Map]"]=F["[object Number]"]=F[zi]=F["[object RegExp]"]=F["[object Set]"]=F["[object String]"]=F["[object Symbol]"]=F["[object Uint8Array]"]=F["[object Uint8ClampedArray]"]=F["[object Uint16Array]"]=F["[object Uint32Array]"]=!0,F["[object Error]"]=F[Wi]=F["[object WeakMap]"]=!1;const Tu=function $t(e,i,t,n,r,o){var l,a=1&i,c=2&i,y=4&i;if(t&&(l=r?t(e,n,r,o):t(e)),void 0!==l)return l;if(!(0,xe.Z)(e))return e;var b=(0,he.Z)(e);if(b){if(l=function(e){var i=e.length,t=new e.constructor(i);return i&&"string"==typeof e[0]&&od.call(e,"index")&&(t.index=e.index,t.input=e.input),t}(e),!a)return(0,Ta.Z)(e,l)}else{var C=De(e),P=C==Wi||"[object GeneratorFunction]"==C;if((0,Wd.Z)(e))return function(e,i){if(i)return e.slice();var t=e.length,n=wi?wi(t):new e.constructor(t);return e.copy(n),n}(e,a);if(C==zi||C==Qi||P&&!r){if(l=c||P?{}:function(e){return"function"!=typeof e.constructor||(0,yi.Z)(e)?{}:Vd(bi(e))}(e),!a)return c?function(e,i){return zt(e,Fi(e),i)}(e,function(e,i){return e&&zt(i,ye(i),e)}(l,e)):function(e,i){return zt(e,ve(e),i)}(e,function(e,i){return e&&zt(i,(0,pe.Z)(i),e)}(l,e))}else{if(!F[C])return r?e:{};l=Yd(e,C,a)}}o||(o=new la);var Y=o.get(e);if(Y)return Y;o.set(e,l),eu(e)?e.forEach(function(k){l.add($t(k,i,t,k,e,o))}):Kd(e)&&e.forEach(function(k,w){l.set(w,$t(k,i,t,w,e,o))});var I=b?void 0:(y?c?$a:za:c?ye:pe.Z)(e);return function(e,i){for(var t=-1,n=null==e?0:e.length;++t<n&&!1!==i(e[t],t,e););}(I||e,function(k,w){I&&(k=e[w=k]),(0,xi.Z)(l,w,$t(k,i,t,w,e,o))}),l},Ui=function(e){return Tu(e,5)};class Zt extends class{constructor(){this.edges=new Map,this.nodes=new Set}addEdge(i){var t;const n=i.src,r=i.dest;if(!this.hasNode(n))throw Error(`addEdge failed source node "${n.toString()}" is not in graph.`);if(!this.hasNode(r))throw Error(`addEdge failed destination node "${r.toString()}" is not in graph.`);if(null===(t=this.edges.get(i.src))||void 0===t?void 0:t.some(o=>o.src===n&&o.dest===r))throw Error(`Add edge failed an edge already exists with src ${n.toString()} => dest ${r.toString()}`);this.edges.set(i.src,this.edges.get(i.src).concat(i))}addNode(i){if(this.nodes.has(i))throw Error(`addNode failed node "${i.toString()}" already exists`);this.nodes.add(i),this.edges.set(i,[])}findPathway(i,t,n,r={nodes:[],edges:[]},o=[]){if(r.nodes=r.nodes.concat(i),n&&(r.edges=r.edges.concat(n)),i===t)return o.concat(r);for(const l of this.getEdgesForNode(i))if(!r.nodes.map(a=>a.toString()).includes(l.dest.toString())){const a=this.findPathway(l.dest,t,l,Ui(r),o);a&&(o=o.concat(a))}return o}getEdgesForNode(i){return this.edges.get(i)||[]}hasNode(i){return this.nodes.has(i)}toString(){return Array.from(this.edges.values()).flat().filter(Boolean).map(i=>i.toString()).join("\n")}}{constructor(i){super(),this.includeRelationsBetweenNetworks=!1,this.selfRelation=i.selfRelation,this.unknownRelation=i.unknownRelation,this.mutualDictionary=i.mutualDictionary,this.combinatorialDictionary=i.combinatorialDictionary}get combinatoriallyEntailed(){const i=[],t=[...this.nodes];for(const n of t)for(const r of t){if(n===r||!this.includeRelationsBetweenNetworks&&n.network!==r.network||this.getEdgesForNode(n).find(l=>l.dest===r))continue;const o=this.findPathway(n,r).map(l=>l.edges.map(a=>a.relation)).reduce((l,a,c)=>{const y=[...a];let b=y.shift();for(;y.length;){const C=y.shift();b=this.combinatorialDictionary[b][C]}return l.push(b),a.length=0,l},[]);0===o.length&&o.push(this.unknownRelation),[...new Set(o.filter(l=>l!==this.unknownRelation))].length>1?console.warn(`Multiple relations detected for ${n.toString()} => ${r.toString()} comparison`,o):i.push({relation:o[0],relationType:g.combinatoriallyEntailed,stimuli:[n,r]})}return i}get identities(){return[...this.nodes].map(i=>({relation:this.selfRelation,relationType:g.identity,stimuli:[i,i]}))}get mutuallyEntailed(){return[...this.edges.values()].flat().filter(i=>i.relationType===g.mutuallyEntailed).map(i=>({relation:i.relation,relationType:i.relationType,stimuli:[i.src,i.dest]}))}get trained(){return[...this.edges.values()].flat().filter(i=>i.relationType===g.trained).map(i=>({relation:i.relation,relationType:i.relationType,stimuli:[i.src,i.dest]}))}addTrainedAndMutualRelations(i){var t,n;const r=i.src,o=i.dest;if(!this.hasNode(r))throw Error(`Add edge failed source node "${r.toString()}" is not in graph.`);if(!this.hasNode(o))throw Error(`Add edge failed destination node "${o.toString()}" is not in graph.`);if(!(null===(t=this.mutualDictionary)||void 0===t?void 0:t[i.relation]))throw Error(`Could not find inverse of relation ${i.relation}`);if(null===(n=this.edges.get(i.src))||void 0===n?void 0:n.some(l=>l.src===r&&l.dest===o))throw Error(`Add edge failed an edge already exists with src ${r.toString()} => dest ${o.toString()}`);this.edges.set(i.src,this.edges.get(i.src).concat(i)),this.edges.set(i.dest,this.edges.get(i.dest).concat(new m(i.dest,i.src,this.mutualDictionary[i.relation],g.mutuallyEntailed)))}findPathway(i,t,n,r={nodes:[],edges:[]},o=[]){if(r.nodes=r.nodes.concat(i),n&&(r.edges=r.edges.concat(n)),i===t)return o.concat(r);for(const l of this.getEdgesForNode(i))if(!r.nodes.map(a=>a.toString()).includes(l.dest.toString())){const a=this.findPathway(l.dest,t,l,Ui(r),o);a&&(o=o.concat(a))}return o}getStimulusComparison(i,t,n,r){return Array().concat(this.identities,this.trained,this.mutuallyEntailed,this.combinatoriallyEntailed).find(({stimuli:o})=>o[0].name===i&&o[0].network===t&&o[1].name===n&&o[1].network===r)}toString(){return[].concat(this.identities,this.trained,this.mutuallyEntailed,this.combinatoriallyEntailed).flat().map(i=>`${i.relationType}: ${i.stimuli[0]} ${i.relation} ${i.stimuli[1]}`).join("\n")}}class f{constructor(i,t,n=""){this.name=i,this.network=t,this._value=n}get value(){return this._value}set value(i){this._value=i}toString(){return`${this.name}${this.network}`}}var Kt=u(202);let Lu=(()=>{class e extends Zt{constructor(t,n){super(n),this.stimulusCase=t,this.relationalFrameGraphConfig=n,this.includeRelationsBetweenNetworks=!0;const r=new f("A",1,h(t)),o=new f("B",1,h(t)),l=new f("C",1,h(t));this.addNode(r),this.addNode(o),this.addNode(l),this.addEdge(new m(r,o,"different",g.trained)),this.addEdge(new m(r,l,"different",g.trained)),this.addEdge(new m(o,r,"different",g.trained)),this.addEdge(new m(o,l,"different",g.trained)),this.addEdge(new m(l,r,"different",g.trained)),this.addEdge(new m(l,o,"different",g.trained));const a=new f("D",2,h(t)),c=new f("E",2,h(t)),y=new f("F",2,h(t));this.addNode(a),this.addNode(c),this.addNode(y)}}return e.\u0275fac=function(t){return new(t||e)(s.LFG(Tt),s.LFG(Kt.o))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var _=u(4146);const Ou=[[_.bR.same,_.bR.same,void 0],[_.bR.same,_.bR.greaterThan,void 0],[_.bR.same,_.bR.lessThan,void 0],[_.bR.lessThan,_.bR.same,void 0],[_.bR.lessThan,void 0,_.bR.lessThan],[_.bR.lessThan,_.bR.greaterThan,void 0],[_.bR.greaterThan,_.bR.same,void 0],[_.bR.greaterThan,_.bR.lessThan,void 0],[_.bR.greaterThan,void 0,_.bR.greaterThan]],Bu=[[_.bR.lessThan,_.bR.lessThan,void 0],[_.bR.greaterThan,_.bR.greaterThan,void 0]];let Iu=(()=>{class e extends Zt{constructor(t,n){super(n),this.stimulusCase=t,this.relationalFrameGraphConfig=n,this.includeRelationsBetweenNetworks=!0;const r=new f("A",3,h(t)),o=new f("B",3,h(t)),l=new f("C",3,h(t));this.addNode(r),this.addNode(o),this.addNode(l);const[a,c,y]=Ot(Ou);a&&this.addTrainedAndMutualRelations(new m(r,o,a,g.trained)),c&&this.addTrainedAndMutualRelations(new m(r,l,c,g.trained)),y&&this.addTrainedAndMutualRelations(new m(o,l,y,g.trained));const b=new f("A",4,h(t)),C=new f("B",4,h(t)),P=new f("C",4,h(t));this.addNode(b),this.addNode(C),this.addNode(P);const[Y,V,I]=Ot(Bu);Y&&this.addTrainedAndMutualRelations(new m(b,C,Y,g.trained)),V&&this.addTrainedAndMutualRelations(new m(b,P,V,g.trained)),I&&this.addTrainedAndMutualRelations(new m(C,P,I,g.trained))}}return e.\u0275fac=function(t){return new(t||e)(s.LFG(Tt),s.LFG(Kt.o))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),ku=(()=>{class e extends Zt{constructor(t,n){super(n),this.stimulusCase=t,this.relationalFrameGraphConfig=n;const r=new f("A",5,h(t)),o=new f("B",5,h(t)),l=new f("C",5,h(t));this.addNode(r),this.addNode(o),this.addNode(l),this.addTrainedAndMutualRelations(new m(r,o,"same",g.trained)),this.addTrainedAndMutualRelations(new m(r,l,"same",g.trained)),this.addTrainedAndMutualRelations(new m(o,l,"same",g.trained));const a=new f("A",6,h(t)),c=new f("B",6,h(t)),y=new f("C",6,h(t));this.addNode(a),this.addNode(c),this.addNode(y),this.addTrainedAndMutualRelations(new m(a,c,"greaterThan",g.trained)),this.addTrainedAndMutualRelations(new m(a,y,"greaterThan",g.trained)),this.addTrainedAndMutualRelations(new m(c,y,"greaterThan",g.trained))}}return e.\u0275fac=function(t){return new(t||e)(s.LFG(Tt),s.LFG(Kt.o))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var qt=u(4455);let $i=(()=>{class e extends Zt{constructor(t,n,r){super(n),this.stimulusCase=t,this.relationalFrameGraphConfig=n,this.config=r,this.finalIckNetworks=[16],this.finalKnownNetworks=[15],this.ickNetworks=[7,8,9,10,11],this.knownNetworks=[5,6,12,13,14],this.includeRelationsBetweenNetworks=!1,this.createIckNetworks(),this.createKnownNetworks()}getFinalNetworks(t){return t?this.finalIckNetworks:this.finalKnownNetworks}getTrainingNetworks(t){return t?this.ickNetworks:this.knownNetworks}createIckNetworks(){const t=new f("A",7,h(this.stimulusCase)),n=new f("B",7,h(this.stimulusCase)),r=new f("C",7,h(this.stimulusCase));this.addNode(t),this.addNode(n),this.addNode(r),this.addTrainedAndMutualRelations(new m(t,n,"lessThan",g.trained)),this.addTrainedAndMutualRelations(new m(n,r,"greaterThan",g.trained));const o=new f("A",8,h(this.stimulusCase)),l=new f("B",8,h(this.stimulusCase)),a=new f("C",8,h(this.stimulusCase));this.addNode(o),this.addNode(l),this.addNode(a),this.addTrainedAndMutualRelations(new m(o,l,"greaterThan",g.trained)),this.addTrainedAndMutualRelations(new m(l,a,"lessThan",g.trained));const c=new f("A",9,h(this.stimulusCase)),y=new f("B",9,h(this.stimulusCase)),b=new f("C",9,h(this.stimulusCase));this.addNode(c),this.addNode(y),this.addNode(b),this.addTrainedAndMutualRelations(new m(c,y,"lessThan",g.trained)),this.addTrainedAndMutualRelations(new m(y,b,"greaterThan",g.trained));const C=new f("A",10,h(this.stimulusCase)),P=new f("B",10,h(this.stimulusCase)),Y=new f("C",10,h(this.stimulusCase));this.addNode(C),this.addNode(P),this.addNode(Y),this.addTrainedAndMutualRelations(new m(C,P,"greaterThan",g.trained)),this.addTrainedAndMutualRelations(new m(P,Y,"lessThan",g.trained));const V=new f("A",11,h(this.stimulusCase)),I=new f("B",11,h(this.stimulusCase)),k=new f("C",11,h(this.stimulusCase));this.addNode(V),this.addNode(I),this.addNode(k),this.addTrainedAndMutualRelations(new m(V,I,"greaterThan",g.trained)),this.addTrainedAndMutualRelations(new m(I,k,"lessThan",g.trained));const w=new f("A",16,h(this.stimulusCase)),j=new f("B",16,h(this.stimulusCase)),nt=new f("C",16,h(this.stimulusCase));this.addNode(w),this.addNode(j),this.addNode(nt),this.addTrainedAndMutualRelations(new m(w,j,"lessThan",g.trained)),this.addTrainedAndMutualRelations(new m(j,nt,"greaterThan",g.trained))}createKnownNetworks(){const t=new f("A",5,h(this.stimulusCase)),n=new f("B",5,h(this.stimulusCase)),r=new f("C",5,h(this.stimulusCase));this.addNode(t),this.addNode(n),this.addNode(r),this.addTrainedAndMutualRelations(new m(t,n,"same",g.trained)),this.addTrainedAndMutualRelations(new m(t,r,"same",g.trained)),this.addTrainedAndMutualRelations(new m(n,r,"same",g.trained));const o=new f("A",6,h(this.stimulusCase)),l=new f("B",6,h(this.stimulusCase)),a=new f("C",6,h(this.stimulusCase));this.addNode(o),this.addNode(l),this.addNode(a),this.addTrainedAndMutualRelations(new m(o,l,"greaterThan",g.trained)),this.addTrainedAndMutualRelations(new m(o,a,"greaterThan",g.trained)),this.addTrainedAndMutualRelations(new m(l,a,"greaterThan",g.trained));const c=new f("A",12,h(this.stimulusCase)),y=new f("B",12,h(this.stimulusCase)),b=new f("C",12,h(this.stimulusCase));this.addNode(c),this.addNode(y),this.addNode(b),this.addTrainedAndMutualRelations(new m(c,y,"lessThan",g.trained)),this.addTrainedAndMutualRelations(new m(c,b,"lessThan",g.trained)),this.addTrainedAndMutualRelations(new m(y,b,"lessThan",g.trained));const C=new f("A",13,h(this.stimulusCase)),P=new f("B",13,h(this.stimulusCase)),Y=new f("C",13,h(this.stimulusCase));this.addNode(C),this.addNode(P),this.addNode(Y),this.addTrainedAndMutualRelations(new m(C,P,"greaterThan",g.trained)),this.addTrainedAndMutualRelations(new m(C,Y,"greaterThan",g.trained)),this.addTrainedAndMutualRelations(new m(P,Y,"same",g.trained));const V=new f("A",14,h(this.stimulusCase)),I=new f("B",14,h(this.stimulusCase)),k=new f("C",14,h(this.stimulusCase));this.addNode(V),this.addNode(I),this.addNode(k),this.addTrainedAndMutualRelations(new m(V,I,"lessThan",g.trained)),this.addTrainedAndMutualRelations(new m(V,k,"lessThan",g.trained)),this.addTrainedAndMutualRelations(new m(I,k,"same",g.trained));const w=new f("A",15,h(this.stimulusCase)),j=new f("B",15,h(this.stimulusCase)),nt=new f("C",15,h(this.stimulusCase));this.addNode(w),this.addNode(j),this.addNode(nt),this.addTrainedAndMutualRelations(new m(w,j,"same",g.trained)),this.addTrainedAndMutualRelations(new m(w,nt,"greaterThan",g.trained)),this.addTrainedAndMutualRelations(new m(j,nt,"greaterThan",g.trained))}updateNodeValuesWithNewStimuli(){for(const t of this.nodes)t.value=h(this.stimulusCase)}}return e.\u0275fac=function(t){return new(t||e)(s.LFG(Tt),s.LFG(Kt.o),s.LFG(qt.R))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function Pu(){const e=Ot(tl);if(void 0===e)throw Error('Random stimulus case returned "undefined"!');return e}function kt(e){return{data:e,disableClose:!0,hasBackdrop:!1,closeOnNavigation:!0,height:"100vh",maxHeight:"100vh",maxWidth:"100vw",panelClass:["fullscreen-dialog-container","animate__animated","animate__fadeIn"],width:"100vw"}}function Nu(e,i){1&e&&s._UZ(0,"iframe",5)}function Yu(e,i){1&e&&s._UZ(0,"iframe",6)}let Zi=(()=>{class e{constructor(t,n){this.data=t,this.ref=n}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(Vt),s.Y36(vt))},e.\u0275cmp=s.Xpm({type:e,selectors:[["survey-dialog"]],decls:7,vars:3,consts:[["mat-dialog-title","",1,"p-3","text-center"],["src","https://docs.google.com/forms/d/e/1FAIpQLSfUjqCloWRFFmtxktYAz-vnNuoo-YpdY1rpuS8bNAM7JiK9Jw/viewform?embedded=true",4,"ngIf"],["src","https://docs.google.com/forms/d/e/1FAIpQLSczKoo6Uf1wy11LoWiwvIcECIjoZy3YdAA-bCzNVDZtpxvAFg/viewform?embedded=true",4,"ngIf"],["mat-dialog-actions",""],["mat-button","","color","primary",3,"click"],["src","https://docs.google.com/forms/d/e/1FAIpQLSfUjqCloWRFFmtxktYAz-vnNuoo-YpdY1rpuS8bNAM7JiK9Jw/viewform?embedded=true"],["src","https://docs.google.com/forms/d/e/1FAIpQLSczKoo6Uf1wy11LoWiwvIcECIjoZy3YdAA-bCzNVDZtpxvAFg/viewform?embedded=true"]],template:function(t,n){1&t&&(s.TgZ(0,"h1",0),s._uU(1),s.qZA(),s.YNc(2,Nu,1,0,"iframe",1),s.YNc(3,Yu,1,0,"iframe",2),s.TgZ(4,"div",3),s.TgZ(5,"button",4),s.NdJ("click",function(){return n.ref.close()}),s._uU(6,"RETURN TO STUDY"),s.qZA(),s.qZA()),2&t&&(s.xp6(1),s.Oqu(n.data.title),s.xp6(1),s.Q6J("ngIf","pre"===n.data.survey),s.xp6(1),s.Q6J("ngIf","post"===n.data.survey))},directives:[Yo,x.O5,jo,pt.lW],styles:["[_nghost-%COMP%]{display:block;padding:16px}iframe[_ngcontent-%COMP%]{height:calc(100vh - 164px);width:calc(100vw - 32px)}"]}),e})(),be=(()=>{class e{constructor(t){this.dialog=t}showPostSurvey(t){return this.dialog.open(Zi,kt({title:`Post Survey | Participant Id = ${t}`,survey:"post"})).afterClosed()}showPreSurvey(t){return this.dialog.open(Zi,kt({title:"Pre Survey",survey:"pre"})).afterClosed()}}return e.\u0275fac=function(t){return new(t||e)(s.LFG(tt))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac}),e})(),ju=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({providers:[be],imports:[[x.ez,fe,pt.ot]]}),e})();var Ki=u(2636),N=u(4762),qi=u(7202),Z=u(9524),bt=u(6797),gt=u(8049),Jt=u(3190);function Xt(e){return(0,D.X$)((null==e?void 0:e.anchor)||"fadeOut",[(0,D.SB)("false",(0,D.oB)({visibility:"visible",opacity:1})),(0,D.SB)(":leave",(0,D.oB)({visibility:"visible",opacity:1})),(0,D.SB)("true",(0,D.oB)({visibility:"hidden",opacity:0})),(0,D.eR)("void => *",(0,D.jt)(0)),(0,D.eR)("* => true",(0,D.jt)("{{duration}}ms {{delay}}ms ease-in"),{params:{duration:(null==e?void 0:e.duration)||1e3,delay:(null==e?void 0:e.delay)||0}})])}const W=150;let Xi=(()=>{class e{constructor(t,n){this.data=t,this.ref=n,this.animated=!1,this.closeClicked=new M.xQ,this.disableClose=Boolean(this.data.disableClose)}close(){return(0,N.mG)(this,void 0,void 0,function*(){this.closeClicked.next(),this.animated=!0,yield(0,bt.H)(750).toPromise(),this.ref.close()})}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(Vt),s.Y36(vt))},e.\u0275cmp=s.Xpm({type:e,selectors:[["block-start-dialog"]],decls:3,vars:3,consts:[["matRipple","",1,"vw-100","vh-100","d-flex","justify-content-center","align-items-center","bg-white",3,"matRippleDisabled","tap"],[1,"overlay-dynamic-text","user-select-none"]],template:function(t,n){1&t&&(s.TgZ(0,"div",0),s.NdJ("tap",function(){return!1===n.disableClose&&n.close()}),s.TgZ(1,"strong",1),s._uU(2),s.qZA(),s.qZA()),2&t&&(s.Q6J("@fadeOut",n.animated)("matRippleDisabled",n.animated||n.disableClose),s.xp6(2),s.Oqu(n.data.text))},directives:[dt.wG],styles:[".overlay-dynamic-text[_ngcontent-%COMP%]{white-space:pre-wrap;font-size:clamp(1rem,8vw,15rem);line-height:clamp(1rem,8vw,15rem);text-align:center}"],data:{animation:[Xt({duration:W})]}}),e})();var v=u(4751);const Pt={_origin:"https://api.emailjs.com"};class nn{constructor(i){this.status=i.status,this.text=i.responseText}}const rn=(e,i,t,n)=>{const r=n||Pt._userID;return((e,i,t)=>{if(!e)throw"The user ID is required. Visit https://dashboard.emailjs.com/admin/integration";if(!i)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!t)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"})(r,e,i),((e,i,t={})=>new Promise((n,r)=>{const o=new XMLHttpRequest;o.addEventListener("load",({target:l})=>{const a=new nn(l);200===a.status||"OK"===a.text?n(a):r(a)}),o.addEventListener("error",({target:l})=>{r(new nn(l))}),o.open("POST",Pt._origin+e,!0),Object.keys(t).forEach(l=>{o.setRequestHeader(l,t[l])}),o.send(i)}))("/api/v1.0/email/send",JSON.stringify({lib_version:"3.2.0",user_id:r,service_id:e,template_id:i,template_params:t}),{"Content-type":"application/json"})},on="Throughout this experiment, you will be presented with two sets of letter sequences, one at the top portion of the screen and one in the middle portion of the screen. You will also be presented with some response option buttons along the bottom of the screen. These buttons may denote the relationship between the letter sequences. They may or may not be familiar to you. Your task is to select the response option that accurately represents the relationship between the letter sequences. You can make your selection by touching the screen or clicking on the relevant response option at the bottom of the screen.\n\n\nYour participation has to be done in one sitting. Typically, participation takes 30 minutes but sometimes exceeds 3 hours to complete. To successfully complete quickly, it is recommended that you minimize sources of distraction while participating. This includes being in a quiet space away from other devices and putting this device on \u201cDo not disturb\u201d mode or its equivalent.\n\n\nSuccessful completion may be challenging and confusing. Please persist to the end and give it your best effort. During some portions of the experiment you will be provided feedback on your selections. If you don\u2019t see feedback, please continue making selections. There is a time limit for making your selections. Please choose your response as fast as you can while still being accurate. Your compensation will go up the more accurate you are.";var Hu=u(2376);let te=(()=>{class e{constructor(t,n){this.fb=t,this.studyConfigService=n,this.reportEntries=[],this.formGroup=this.fb.group({studyInstructions:[""],participantId:["",v.kI.required],condition:["",v.kI.required],contextualControl:["",v.kI.required],cueType:["",[v.kI.required]],trialTimeoutSeconds:[0,v.kI.min(1)],balanceEquivalence:[0,v.kI.min(1)],balanceLessThan:[0,v.kI.min(1)],balanceGreaterThan:[0,v.kI.min(1)],balanceICannotKnow:[-1,v.kI.min(0)],blockId:["",v.kI.required],blockAttempts:[-1,v.kI.min(0)],stimulusCase:["",v.kI.required],trainingAttempts:[-1,v.kI.min(0)],probeAttempts:[-1,v.kI.min(0)],trialNumber:[-1,v.kI.min(0)],totalTrials:[-1,v.kI.min(0)],sampleNode:["",v.kI.required],sample:["",v.kI.required],comparisonNode:["",v.kI.required],comparison:["",v.kI.required],correctResponse:["",v.kI.required],button1Image:["",v.kI.required],button1Relation:["",v.kI.required],button2Image:["",v.kI.required],button2Relation:["",v.kI.required],button3Image:["",v.kI.required],button3Relation:["",v.kI.required],button4Image:["",v.kI.required],button4Relation:["",v.kI.required],buttonPosition:[-2,v.kI.min(-1)],selectedResponse:[""],consequence:[""],trialStarted:["",v.kI.required],trialCompleted:["",v.kI.required],trialDurationInSeconds:[-1,v.kI.min(0)],trialOutcome:["",v.kI.required],containsSequentialTriplicates:["",v.kI.required],failSafeDuration:["",v.kI.required],startInstructions:["",v.kI.required],retryInstructions:["",v.kI.required],studyFailed:["FALSE"],sequentialCorrect:[-1,v.kI.min(0)],maxAttempts:[0,v.kI.min(1)],repeatBlockWhenProbeTrialWrongCountIs:[0,v.kI.min(0)]})}add(t,n){this.formGroup.get(t).setValue(n)}addTrial(t,n){var r;if(!t.studyConfig)throw Error("Study configuration is undefined");if(!t.trial)throw Error("Trial is undefined");this.studyConfig=t.studyConfig,this.add("studyInstructions",0===this.reportEntries.length?on.replaceAll("\n",""):""),this.add("participantId",t.studyConfig.participantId),this.add("condition",t.studyConfig.condition),this.add("contextualControl",t.studyConfig.contextualControl),this.add("cueType",t.studyConfig.cueType),this.add("trialTimeoutSeconds",t.studyConfig.trialTimeoutSeconds),this.add("repeatBlockWhenProbeTrialWrongCountIs",t.studyConfig.repeatBlockWhenProbeTrialWrongCountIs),this.add("maxAttempts",t.studyConfig.maxAttempts),this.add("blockId",t.name),this.add("blockAttempts",t.attempts),this.add("trainingAttempts",t.trainingAttempts),this.add("probeAttempts",t.probeAttempts),this.add("trialNumber",t.trialNum),this.add("totalTrials",t.totalTrials),this.add("sampleNode",t.trial.stimuli[0].toString()),this.add("sample",t.trial.stimuli[0].value),this.add("comparisonNode",t.trial.stimuli[1].toString()),this.add("comparison",t.trial.stimuli[1].value),this.add("correctResponse",t.trial.relation),this.add("button1Image",t.trial.cueComponentConfigs[0].fileName),this.add("button1Relation",t.trial.cueComponentConfigs[0].value),this.add("button2Image",t.trial.cueComponentConfigs[1].fileName),this.add("button2Relation",t.trial.cueComponentConfigs[1].value),this.add("button3Image",t.trial.cueComponentConfigs[2].fileName),this.add("button3Relation",t.trial.cueComponentConfigs[2].value),this.add("button4Image",t.trial.cueComponentConfigs.length>=4?t.trial.cueComponentConfigs[3].fileName:"UNDEFINED"),this.add("button4Relation",t.trial.cueComponentConfigs.length>=4?t.trial.cueComponentConfigs[3].value:"UNDEFINED"),this.add("buttonPosition",(null==n?void 0:n.position)?n.position:-1),this.add("selectedResponse",(null==n?void 0:n.cue)?n.cue.value:""),this.add("consequence",(null==n?void 0:n.cue)?(null==t?void 0:t.feedback)?t.feedback:"NEXT TRIAL":"TIME EXPIRED"),this.add("trialStarted",n.startedAt),this.add("trialCompleted",n.completedAt),this.add("trialDurationInSeconds",Math.abs(n.startedAt.getTime()-n.completedAt.getTime())/1e3),this.add("trialOutcome",(null===(r=null==n?void 0:n.cue)||void 0===r?void 0:r.value)===t.trial.relation?"PASS":"FAIL"),this.add("containsSequentialTriplicates",t.containsSequentialTriplicates?"TRUE":"FALSE"),this.add("failSafeDuration",t.failSafeDuration.toString()),this.add("startInstructions",t.startInstructions),this.add("retryInstructions",t.retryInstructions),this.add("studyFailed",t.studyFailed?"TRUE":"FALSE"),this.add("sequentialCorrect",t.sequentialCorrect),this.reportEntries.push(this.formGroup.value),this.formGroup.reset()}blobToBase64(t){return new Promise(n=>{const r=new FileReader;r.onloadend=()=>n(r.result),r.readAsDataURL(t)})}sendReport(t){return(0,N.mG)(this,void 0,void 0,function*(){const{participantId:n}=this.studyConfigService,r="\r\n";this.reportEntries.length&&(this.reportEntries[this.reportEntries.length-1].studyFailed="complete"!==t?"TRUE":"FALSE");const o=this.reportEntries.map(y=>Object.values(y).map(b=>{var C;return null!==(C=null==b?void 0:b.toString())&&void 0!==C?C:""}).join(";")).join(r),l=`MEEKU - ${n}.csv`,a=new Blob([t+r+Object.keys(this.formGroup.value).join(";")+r+o],{type:"text/csv"}),c=yield this.blobToBase64(a);((e,i="https://api.emailjs.com")=>{Pt._userID=e,Pt._origin=i})("user_OawQbiPiSgdzcdY3SkdGT"),rn("meeku-report","meeku-report",{attachmentName:l,content:c,from_name:"Meeku Robot",to_name:"Patrick",message:`New report has been issued! ${n}`,participant:l},"user_OawQbiPiSgdzcdY3SkdGT").then(function(){},function(y){console.error("Failed to send report...",y)})})}}return e.\u0275fac=function(t){return new(t||e)(s.LFG(Hu.qu),s.LFG(qt.R))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var Ft;class ft{constructor(){Ft.set(this,0)}get showColorTrial(){return 100===(0,N.Q_)(this,Ft,"f")}increase(){(0,N.YH)(this,Ft,+(0,N.Q_)(this,Ft,"f")+1,"f")}reset(){(0,N.YH)(this,Ft,0,"f")}}Ft=new WeakMap,ft.\u0275fac=function(i){return new(i||ft)},ft.\u0275prov=s.Yz7({token:ft,factory:ft.\u0275fac,providedIn:"root"});const Qu=function(e,i){return{value:e,params:i}};let Wu=(()=>{class e{constructor(t,n){this.data=t,this.ref=n,this.animated=!1,setTimeout(()=>this.animated=!0,0),setTimeout(()=>this.ref.close(),this.data.durationMs);const r=new Audio;r.src=`./assets/${t.feedback.toLowerCase().replaceAll(" ","-")}.mp3`,r.load(),r.play().then(()=>r.remove())}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(Vt),s.Y36(vt))},e.\u0275cmp=s.Xpm({type:e,selectors:[["trial-correct-dialog"]],decls:3,vars:5,consts:[[1,"vw-100","vh-100","d-flex","justify-content-center","align-items-center","bg-white"],[1,"overlay-dynamic-text","user-select-none"]],template:function(t,n){1&t&&(s.TgZ(0,"div",0),s.TgZ(1,"strong",1),s._uU(2),s.qZA(),s.qZA()),2&t&&(s.Q6J("@fadeOut",s.WLB(2,Qu,n.animated,n.data.animationParams)),s.xp6(2),s.Oqu(n.data.feedback))},styles:[".overlay-dynamic-text[_ngcontent-%COMP%]{font-size:clamp(1rem,8vw,15rem);white-space:nowrap}"],data:{animation:[Xt()]}}),e})();var zu=u(409);const Te={stimuli:[500,1e3],cues:Array(5).fill(1500)},an=Math.max(...Object.values(Te).flat())+1e3;var ee=u(680),Me=u(730),Uu=u(945),$u=u(1289);function dn(e){return(0,D.X$)((null==e?void 0:e.anchor)||"fadeIn",[(0,D.SB)("void",(0,D.oB)({visibility:"hidden",opacity:0})),(0,D.SB)("false",(0,D.oB)({visibility:"hidden",opacity:0})),(0,D.SB)("true",(0,D.oB)({visibility:"visible",opacity:1})),(0,D.eR)("* => true",(0,D.jt)("{{duration}}ms {{delay}}ms ease-in"),{params:{duration:(null==e?void 0:e.duration)||1e3,delay:(null==e?void 0:e.delay)||0}})])}const Zu=function(e){return{delay:e}},Ku=function(e,i){return{value:e,params:i}},qu=function(e,i){return{"d-none":e,"hover-able":i}},Ju=function(e){return{"pointer-events":e}};let it=class{constructor(i){this.deviceDetectorSvc=i,this.animationDelay=0,this.correct=!1,this.disabled=!0,this.isDesktop=this.deviceDetectorSvc.isDesktop(),this.selected=new s.vpe,this.shake=!1}ngOnInit(){(0,Uu.F)(4e3).pipe((0,H.h)(()=>this.correct),(0,U.b)(()=>this.shake=!0),(0,$u.g)(1500),(0,U.b)(()=>this.shake=!1),(0,Z.t)(this)).subscribe()}select(){this.disabled=!0,this.selected.emit(this.config)}set(i){return(0,N.mG)(this,void 0,void 0,function*(){this.animate="fade-out",yield(0,bt.H)(W).toPromise(),this.disabled=!1,this.config=i,this.animate="fade-in"})}};it.\u0275fac=function(i){return new(i||it)(s.Y36(Me.x0))},it.\u0275cmp=s.Xpm({type:it,selectors:[["trial-cue"]],inputs:{animationDelay:"animationDelay"},outputs:{selected:"selected"},decls:2,vars:20,consts:[["matRipple","","onclick","blur()",1,"trial-item","dynamic-text",3,"matRippleDisabled","ngClass","ngStyle","click","tap"]],template:function(i,t){1&i&&(s.TgZ(0,"button",0),s.NdJ("click",function(){return t.isDesktop&&!t.disabled&&t.select()})("tap",function(){return!t.isDesktop&&!t.disabled&&t.select()}),s._uU(1),s.qZA()),2&i&&(s.Udp("background-image",null==t.config?null:t.config.fileName),s.ekj("shakeY",t.shake),s.Q6J("@fadeIn",s.WLB(12,Ku,"fade-in"===t.animate,s.VKq(10,Zu,t.animationDelay)))("@fadeOut","fade-out"===t.animate)("matRippleDisabled",t.disabled)("ngClass",s.WLB(15,qu,void 0===t.config,t.isDesktop))("ngStyle",s.VKq(18,Ju,null!=t.config&&t.config.value?"all":"none")),s.xp6(1),s.hij(" ",null!=t.config&&t.config.isArbitrary?"\xa0":(null==t.config?null:t.config.viewValue)||""," "))},directives:[dt.wG,x.mk,x.PC],styles:["[_nghost-%COMP%]{display:block}button.trial-item.hover-able[_ngcontent-%COMP%]:hover{box-shadow:inset 0 50px 300px 50px #0003;cursor:pointer}.trial-buttons[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;margin-top:2em}.trial-item[_ngcontent-%COMP%]{align-items:center;min-height:75px;height:10vw;background-color:#fff;background-size:cover;border:unset;display:flex;border-radius:clamp(3px,1vw,15px);justify-content:center;margin:1vw;min-width:150px;width:20vw}.trial-item[_ngcontent-%COMP%]:hover{cursor:default}.trial-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:clamp(1rem,2vw,4rem);white-space:nowrap}.dynamic-text[_ngcontent-%COMP%]{font-weight:bold;font-size:clamp(1rem,2vw,4rem);white-space:nowrap}.trial-sample-stimuli[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:column;justify-content:center}",""],data:{animation:[dn(),Xt({duration:W})]}}),it=(0,N.gn)([(0,Z.c)(),(0,N.w6)("design:paramtypes",[Me.x0])],it);const Xu=function(e){return{delay:e}},tc=function(e,i){return{value:e,params:i}};let un=(()=>{class e{constructor(t){this.deviceDetectorSvc=t,this.animationDelay=0,this.isDesktop=this.deviceDetectorSvc.isDesktop()}setCue(t){return(0,N.mG)(this,void 0,void 0,function*(){this.animate="fade-out",yield(0,bt.H)(W).toPromise(),this.backgroundImage=_.Sg,this.cue=t,this.animate="fade-in"})}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(Me.x0))},e.\u0275cmp=s.Xpm({type:e,selectors:[["trial-stimulus"]],inputs:{animationDelay:"animationDelay"},decls:2,vars:10,consts:[[1,"trial-item","dynamic-text"]],template:function(t,n){1&t&&(s.TgZ(0,"div",0),s._uU(1),s.qZA()),2&t&&(s.Udp("background-image",n.backgroundImage),s.Q6J("@fadeIn",s.WLB(7,tc,"fade-in"===n.animate,s.VKq(5,Xu,n.animationDelay)))("@fadeOut","fade-out"===n.animate),s.xp6(1),s.hij(" ",n.cue,"\n"))},styles:["[_nghost-%COMP%]{display:block}button.trial-item.hover-able[_ngcontent-%COMP%]:hover{box-shadow:inset 0 50px 300px 50px #0003;cursor:pointer}.trial-buttons[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;margin-top:2em}.trial-item[_ngcontent-%COMP%]{align-items:center;min-height:75px;height:10vw;background-color:#fff;background-size:cover;border:unset;display:flex;border-radius:clamp(3px,1vw,15px);justify-content:center;margin:1vw;min-width:150px;width:20vw}.trial-item[_ngcontent-%COMP%]:hover{cursor:default}.trial-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:clamp(1rem,2vw,4rem);white-space:nowrap}.dynamic-text[_ngcontent-%COMP%]{font-weight:bold;font-size:clamp(1rem,2vw,4rem);white-space:nowrap}.trial-sample-stimuli[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:column;justify-content:center}",""],data:{animation:[dn(),Xt({duration:W})]}}),e})();function ec(e,i){1&e&&s._UZ(0,"trial-stimulus",4),2&e&&s.Q6J("animationDelay",i.$implicit)}function ic(e,i){if(1&e){const t=s.EpF();s.TgZ(0,"trial-cue",5),s.NdJ("selected",function(r){const l=s.CHM(t).index;return s.oxw().selected(r,l+1)}),s.qZA()}2&e&&s.Q6J("animationDelay",i.$implicit)}let K=class{constructor(i){this.overlaySvc=i,this.animationDelayMs=Te,this.complete=!1,this.completed=new s.vpe,this.secondsInTrial=0}clearTimer(){this.timerSub&&this.timerSub.unsubscribe()}ngAfterViewInit(){if(!this.trialCueComponents)throw Error("Trial cue components are undefined");if(!this.trialStimulusComponents)throw Error("Trial stimulus components are undefined");this.trialCueComponents.changes.pipe((0,Z.t)(this)).subscribe(),this.trialStimulusComponents.changes.pipe((0,Z.t)(this)).subscribe()}selected(i,t){if(!this.startedAt)throw Error("Started at date is undefined");this.clearTimer(),this.complete=!0,this.completed.emit({cue:i,position:t,startedAt:this.startedAt,completedAt:new Date})}setTimer(){const{studyConfig:i}=this;if(!i)throw Error("Study configuration is undefined");this.clearTimer(),this.secondsInTrial=0,this.timerSub=(0,bt.H)(an,1e3).pipe((0,zu.o)(()=>this.secondsInTrial<i.trialTimeoutSeconds&&!this.complete),(0,U.b)(()=>{this.secondsInTrial++,this.secondsInTrial===i.trialTimeoutSeconds&&!this.complete&&this.selected()}),(0,Z.t)(this)).subscribe()}show(i,t=!0){var n;if(this.overlaySvc.hide(),!this.trialCueComponents)throw Error("Trial cue components are undefined");if(!this.trialStimulusComponents)throw Error("Trial stimulus components are undefined");setTimeout(()=>this.startedAt=new Date,Te.cues[0]),this.complete=!1,this.setTimer();for(const[r,o]of i.stimuli.entries())null===(n=this.trialStimulusComponents.get(r))||void 0===n||n.setCue(o.value);for(let r=0;r<this.trialCueComponents.length;r++){const o=i.cueComponentConfigs[r],l=this.trialCueComponents.get(r);l.set(o).then(),l.correct=t&&i.relation===(null==o?void 0:o.value)}}};K.\u0275fac=function(i){return new(i||K)(s.Y36(ee.F))},K.\u0275cmp=s.Xpm({type:K,selectors:[["trial"]],viewQuery:function(i,t){if(1&i&&(s.Gf(it,5),s.Gf(un,5)),2&i){let n;s.iGM(n=s.CRH())&&(t.trialCueComponents=n),s.iGM(n=s.CRH())&&(t.trialStimulusComponents=n)}},inputs:{studyConfig:"studyConfig"},outputs:{completed:"completed"},decls:4,vars:2,consts:[[1,"trial-sample-stimuli"],[3,"animationDelay",4,"ngFor","ngForOf"],[1,"trial-buttons"],[3,"animationDelay","selected",4,"ngFor","ngForOf"],[3,"animationDelay"],[3,"animationDelay","selected"]],template:function(i,t){1&i&&(s.TgZ(0,"div",0),s.YNc(1,ec,1,1,"trial-stimulus",1),s.qZA(),s.TgZ(2,"div",2),s.YNc(3,ic,1,1,"trial-cue",3),s.qZA()),2&i&&(s.xp6(1),s.Q6J("ngForOf",t.animationDelayMs.stimuli),s.xp6(2),s.Q6J("ngForOf",t.animationDelayMs.cues))},directives:[x.sg,un,it],styles:["[_nghost-%COMP%]{display:block}button.trial-item.hover-able[_ngcontent-%COMP%]:hover{box-shadow:inset 0 50px 300px 50px #0003;cursor:pointer}.trial-buttons[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;margin-top:2em}.trial-item[_ngcontent-%COMP%]{align-items:center;min-height:75px;height:10vw;background-color:#fff;background-size:cover;border:unset;display:flex;border-radius:clamp(3px,1vw,15px);justify-content:center;margin:1vw;min-width:150px;width:20vw}.trial-item[_ngcontent-%COMP%]:hover{cursor:default}.trial-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:clamp(1rem,2vw,4rem);white-space:nowrap}.dynamic-text[_ngcontent-%COMP%]{font-weight:bold;font-size:clamp(1rem,2vw,4rem);white-space:nowrap}.trial-sample-stimuli[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:column;justify-content:center}"]}),K=(0,N.gn)([(0,Z.c)(),(0,N.w6)("design:paramtypes",[ee.F])],K);var cn=u(9573);function sc(e,i){if(1&e){const t=s.EpF();s.TgZ(0,"trial",1),s.NdJ("completed",function(r){return s.CHM(t),s.oxw().trialCompleted.emit(r)}),s.qZA()}}let rc=(()=>{class e{constructor(t,n,r,o){this.dialog=t,this.overlaySvc=n,this.reportSvc=r,this.trialCounterSvc=o,this.completed=new M.xQ,this.containsSequentialTriplicates=!1,this.correct=0,this.failSafeDuration=0,this.feedBackShown=!1,this.incorrect=0,this.index=-1,this.isVisible=!0,this.lastTrialWasColor=!1,this.name="Block",this.retryInstructions="TAKE A BREAK THEN CLICK TO TRY AGAIN",this.sequentialCorrect=0,this.startInstructions="CLICK TO START",this.started=new M.xQ,this.studyFailed=!1,this.trialCompleted=new s.vpe,this.trials=[],this._attempts=0,this._probeAttempts=0,this._totalTrials=0,this._trainingAttempts=0}get attempts(){return this._attempts}get probeAttempts(){return this._probeAttempts}get studyConfig(){if(!this._studyConfig)throw Error("Study configuration is undefined");return this._studyConfig}set studyConfig(t){this._studyConfig=t}get totalTrials(){return this._totalTrials}get trainingAttempts(){return this._trainingAttempts}get trial(){if(!this._trial)throw Error("Trial is undefined");return this._trial}set trial(t){this._trial=t}get isLastTrial(){return this.index===this.trials.length-1}get percentCorrect(){return this.correct/(this.correct+this.incorrect)*100}get trialNum(){return this.index+1}complete(){this.incrementAttempt(),this.completedAt=new Date,setTimeout(()=>{this.completed.next({failed:!1})},500+(this.feedBackShown?850:W))}createTrials(){return[]}failed(){this.completed.next({failed:!0})}feedbackEnabled(){return!1}grade(t){var n,r;const o=(null===(n=null==t?void 0:t.cue)||void 0===n?void 0:n.value)===this.trial.relation;return["red","green","blue"].includes(this.trial.relation)||((null===(r=null==t?void 0:t.cue)||void 0===r?void 0:r.value)===this.trial.relation?(this.correct++,this.sequentialCorrect++):(this.incorrect++,this.sequentialCorrect=0)),o?"CORRECT":"WRONG"}increaseTotalTrials(){this._totalTrials++}incrementAttempt(){this._attempts++}incrementProbeAttempts(){return this._probeAttempts++}incrementTrainingAttempts(){return this._trainingAttempts++}nextTrial(t=!0){-1===this.index&&(this.startedAt=new Date),this.trialCounterSvc.increase(),this.trialCounterSvc.showColorTrial?(this.showTrial(function(){const e=Ot(["red","green","blue"]);if(!e)throw Error("Missing color in create color trial");return{relation:e,relationType:"N/A",stimuli:[new f("choose",0,"choose"),new f(e,0,e)],cueComponentConfigs:(0,cn.Z)([{fileName:_.Sg,isArbitrary:!1,value:"red",viewValue:"red"},{fileName:_.Sg,isArbitrary:!1,value:"blue",viewValue:"blue"},{fileName:_.Sg,isArbitrary:!1,value:"green",viewValue:"green"}])}}(),this.feedBackShown?850:0,!1),this.trialCompleted.pipe((0,gt.P)()).subscribe(n=>this.cueSelected(n)),this.trialCounterSvc.reset()):this.index<this.trials.length?(this.showTrial(this.trials[this.index],this.feedBackShown?850:0,t),this.trialCompleted.pipe((0,gt.P)()).subscribe(n=>this.cueSelected(n))):this.complete()}prompt(t,n=!1,r=an){return(0,bt.H)(r).pipe((0,gt.P)(),(0,Jt.w)(()=>this.dialog.open(Xi,kt({text:t,disableClose:n})).componentInstance.closeClicked.pipe((0,gt.P)())))}reset(){this.index=-1,this.correct=0,this.incorrect=0,this.sequentialCorrect=0,this.trials=this.createTrials()}retry(){this.incrementAttempt(),this.prompt(this.retryInstructions,!1,500+(this.feedBackShown?850:W)).subscribe(()=>this.nextTrial()),this.reset()}showFeedback(t,n=1e3,r={delay:850,duration:W}){this.feedBackShown=!0,this.isLastTrial&&this.overlaySvc.show(850),this.dialog.open(Wu,kt({animationParams:r,durationMs:n,feedback:t}))}showTrial(t,n=850,r){this.lastTrialWasColor=["red","green","blue"].includes(t.relation),this.feedBackShown=!1,this.trial=t,setTimeout(()=>{var o;return null===(o=this.trialComponent)||void 0===o?void 0:o.show(t,r)},n)}start(){0===this.trials.length&&this.reset(),this.prompt(this.startInstructions,!1,500).subscribe(()=>{this.started.next(),this.nextTrial()})}cueSelected(t){this.feedback=this.grade(t),(null==t?void 0:t.cue)?this.feedback&&this.feedbackEnabled()&&this.showFeedback(this.feedback):this.showFeedback("TIME EXPIRED"),this.reportSvc.addTrial(this,t),this.increaseTotalTrials(),this.nextTrial()}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(tt),s.Y36(ee.F),s.Y36(te),s.Y36(ft))},e.\u0275cmp=s.Xpm({type:e,selectors:[["block"]],viewQuery:function(t,n){if(1&t&&s.Gf(K,5),2&t){let r;s.iGM(r=s.CRH())&&(n.trialComponent=r.first)}},outputs:{completed:"completed",started:"started",trialCompleted:"trialCompleted"},decls:1,vars:1,consts:[[3,"completed",4,"ngIf"],[3,"completed"]],template:function(t,n){1&t&&s.YNc(0,sc,1,0,"trial",0),2&t&&s.Q6J("ngIf",n.isVisible)},directives:[x.O5,K],styles:[""]}),e})();var oc=u(2151);function gn(e,i){return(0,cn.Z)(i?_.Tz:_.do).map(n=>({isArbitrary:e.cueType===_.j8.arbitrary,fileName:e.cueType===_.j8.nonArbitrary?_.Sg:_.FC[n],value:n,viewValue:oc.upper(n)}))}function lc(e,i){if(1&e){const t=s.EpF();s.TgZ(0,"trial",1),s.NdJ("completed",function(r){return s.CHM(t),s.oxw().trialCompleted.emit(r)}),s.qZA()}if(2&e){const t=s.oxw();s.Q6J("studyConfig",t.studyConfig)}}let ie=(()=>{class e extends rc{constructor(t,n,r,o,l){super(t,n,r,o),this.oneToManyGraph=l,this.name="One To Many Block",this.probeTrialCount=0,this.probeTrialWithoutFeedbackStart=32,this.probeWrongCount=0,this.sequentialProbeTrialCorrectRequiredToAdvance=3,this.sequentialTrainingTrialCorrectRequiredToAdvance=3,this.startInstructions="TAKE A BREAK THEN CLICK TO CONTINUE",this.trainingTrialCount=0}get isTrainingTrial(){return this.index<this.probeTrialWithoutFeedbackStart}get blockFailed(){return this.attempts+1>=this.studyConfig.maxAttempts}get lastAnswerCorrect(){return this.sequentialCorrect>0}get repeatBlock(){return this.probeWrongCount>=this.studyConfig.repeatBlockWhenProbeTrialWrongCountIs&&36===this.trialNum&&3===this.probeTrialCount}get repeatProbeTrial(){return this.probeTrialCount<this.sequentialProbeTrialCorrectRequiredToAdvance}get repeatTrainingTrial(){return this.trainingTrialCount<this.sequentialTrainingTrialCorrectRequiredToAdvance&&this.index>-1}createTrials(){const t=this.oneToManyGraph.getTrainingNetworks(this.ick),n=this.oneToManyGraph.getFinalNetworks(this.ick),r=this.getOrderedTrials(t,ac),o=this.getOrderedTrials(n,dc),l=this.getOrderedTrials(n,uc);return r.concat(o,l)}feedbackEnabled(){return this.index<this.probeTrialWithoutFeedbackStart}nextTrial(){if(this.lastTrialWasColor)return super.nextTrial();this.isTrainingTrial?this.nextTrainingTrial():this.nextProbeTrial()}ngOnInit(){this.start(),this.sequentialTrainingTrialCorrectRequiredToAdvance=this.studyConfig.trainingTrialCorrectToAdvance}reset(){this.index=-1,this.correct=0,this.incorrect=0,this.probeTrialCount=0,this.probeWrongCount=0,this.trainingTrialCount=0,this.oneToManyGraph.updateNodeValuesWithNewStimuli()}start(){this.trials=this.createTrials(),this.prompt(this.startInstructions,!1,500).subscribe(()=>{this.started.next(),this.nextTrial()})}getOrderedTrials(t,n){const r=[];for(const o of t)for(const{stimulus1:l,stimulus2:a}of n){const c=this.oneToManyGraph.getStimulusComparison(l,o,a,o);r.push(Object.assign(Object.assign({},c),{cueComponentConfigs:gn(this.studyConfig,this.ick)}))}return r}nextProbeTrial(){this._trial&&(this.probeWrongCount=this.lastAnswerCorrect?this.probeWrongCount:this.probeWrongCount+1),this.probeTrialCount++,this.repeatBlock?this.restart():this.repeatProbeTrial?this.repeatTrial(!1):(this.probeTrialCount=0,this.index++,super.nextTrial(!1))}nextTrainingTrial(){this.trainingTrialCount=this.lastAnswerCorrect?this.trainingTrialCount+1:0,this.repeatTrainingTrial?this.repeatTrial():(this.trainingTrialCount=0,this.index++,super.nextTrial())}randomizeStimuliPositions(){this.trial.cueComponentConfigs=gn(this.studyConfig,this.ick)}repeatTrial(t=!1){this.randomizeStimuliPositions(),super.nextTrial(t)}restart(){this.blockFailed?this.failed():this.retry()}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(tt),s.Y36(ee.F),s.Y36(te),s.Y36(ft),s.Y36($i))},e.\u0275cmp=s.Xpm({type:e,selectors:[["one-to-many-block"]],features:[s.qOj],decls:1,vars:1,consts:[[3,"studyConfig","completed",4,"ngIf"],[3,"studyConfig","completed"]],template:function(t,n){1&t&&s.YNc(0,lc,1,1,"trial",0),2&t&&s.Q6J("ngIf",n.isVisible)},directives:[x.O5,K],styles:[""]}),e})();const ac=[{stimulus1:"A",stimulus2:"B"},{stimulus1:"B",stimulus2:"A"},{stimulus1:"B",stimulus2:"C"},{stimulus1:"C",stimulus2:"B"},{stimulus1:"C",stimulus2:"A"},{stimulus1:"A",stimulus2:"C"}],dc=[{stimulus1:"A",stimulus2:"B"},{stimulus1:"B",stimulus2:"C"}],uc=[{stimulus1:"B",stimulus2:"A"},{stimulus1:"C",stimulus2:"B"},{stimulus1:"C",stimulus2:"A"},{stimulus1:"A",stimulus2:"C"}],cc=["container"];function gc(e,i){if(1&e){const t=s.EpF();s.TgZ(0,"mat-card",2),s.TgZ(1,"mat-card-title"),s._uU(2,"Welcome"),s.qZA(),s.TgZ(3,"mat-card-content",3),s._uU(4),s.qZA(),s.TgZ(5,"mat-card-actions"),s.TgZ(6,"button",4),s.NdJ("click",function(){return s.CHM(t),s.oxw().showPreSurvey()}),s._uU(7,"NEXT"),s.qZA(),s.qZA(),s.qZA()}if(2&e){const t=s.oxw();s.xp6(4),s.hij(" ",t.instructions," ")}}let mt=class{constructor(i,t,n,r,o,l){this.document=i,this.componentFactoryResolver=t,this.dialog=n,this.reportSvc=r,this.studyConfigSvc=o,this.surveySvc=l,this.abandonmentEnabled=!1,this.blocksAndBoolean=[],this.complete=!1,this.instructions=on,this.showInstructions=!0}addBlocks(){const{config:i}=this.studyConfigSvc;this.blocksAndBoolean=i.condition===qi.g.withIck?[{block:ie,ick:!0}]:i.condition===qi.g.withoutIck?[{block:ie,ick:!1}]:[{block:ie,ick:!1},{block:ie,ick:!0}]}createBlockComponent(i,t){if(!this.container)throw Error("Container is undefined");const n=this.componentFactoryResolver.resolveComponentFactory(i);this.container.clear();const o=this.container.createComponent(n).instance;o.studyConfig=this.studyConfigSvc.config,o.ick=t,o.started.pipe((0,gt.P)(),(0,Z.t)(this)).subscribe(()=>this.abandonmentEnabled=!0),o.completed.pipe((0,gt.P)(),(0,U.b)(({failed:l})=>{this.abandonmentEnabled=!1,l&&0===this.blocksAndBoolean.length?this.showCompleteDialog("failed"):this.blocksAndBoolean.length?(this.nextBlock(),this.reportSvc.sendReport("block").then()):this.showCompleteDialog("complete")}),(0,Z.t)(this)).subscribe()}nextBlock(){this.showInstructions=!1;const i=this.blocksAndBoolean.shift();if(!i)throw Error("Block is undefined");const{block:t,ick:n}=i;this.createBlockComponent(t,n)}ngOnInit(){this.studyConfigSvc.loadStudyConfigFromParams().then()}showCompleteDialog(i){var t;const{participantId:n}=this.studyConfigSvc,r="abandoned"===i?`STUDY ABANDONED!\n\n PARTICIPANT ID:\n ${n}`:`THANKS FOR PARTICIPATING!\n\n PARTICIPANT ID:\n ${n}`;this.complete=!0,null===(t=this.container)||void 0===t||t.clear(),(0,bt.H)(500).pipe((0,gt.P)(),(0,Jt.w)(()=>this.reportSvc.sendReport(i)),(0,Jt.w)(()=>"abandoned"!==i?this.surveySvc.showPostSurvey(n):[r]),(0,Jt.w)(()=>this.dialog.open(Xi,kt({text:r,disableClose:!0})).afterClosed())).subscribe()}showPreSurvey(){this.surveySvc.showPreSurvey(this.studyConfigSvc.participantId).subscribe(()=>{this.addBlocks(),this.nextBlock()})}};mt.\u0275fac=function(i){return new(i||mt)(s.Y36(x.K0),s.Y36(s._Vd),s.Y36(tt),s.Y36(te),s.Y36(qt.R),s.Y36(be))},mt.\u0275cmp=s.Xpm({type:mt,selectors:[["study"]],viewQuery:function(i,t){if(1&i&&s.Gf(cc,7,s.s_b),2&i){let n;s.iGM(n=s.CRH())&&(t.container=n.first)}},features:[s._Bn([])],decls:3,vars:1,consts:[["style","max-width: 400px",4,"ngIf"],["container",""],[2,"max-width","400px"],[2,"white-space","pre-line"],["color","primary","onclick","blur()","mat-button","",3,"click"]],template:function(i,t){1&i&&(s.YNc(0,gc,8,1,"mat-card",0),s.GkF(1,null,1)),2&i&&s.Q6J("ngIf",t.showInstructions)},directives:[x.O5,z.a8,z.n5,z.dn,z.hq,pt.lW],styles:["[_nghost-%COMP%]{-webkit-box-align:center;-webkit-box-pack:center;align-items:center;display:flex;flex-direction:column;height:100%;justify-content:center;width:100%}.mat-card[_ngcontent-%COMP%]{max-height:100%}.mat-card-content[_ngcontent-%COMP%]{height:calc(100% - 80px);overflow:auto}"]}),mt=(0,N.gn)([(0,Z.c)(),(0,N.w6)("design:paramtypes",[Document,s._Vd,tt,te,qt.R,be])],mt);const fc=[{path:"",component:mt}];let hc=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[[Ki.Bz.forChild(fc)],Ki.Bz]}),e})();const Tt=new s.OlP("Stimulus case");let mc=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({providers:[Lu,Iu,ku,$i,{provide:Tt,useValue:Pu()}],imports:[[Wo,x.ez,pt.ot,z.QW,Uo,hc,ju]]}),e})()},2151:function(ne){(function(){"use strict";var st=function(d,p){return d.replace(/(^|-)/g,"$1\\u"+(p=p||"")).replace(/,/g,"\\u"+p)},u=st("20-26,28-2F,3A-40,5B-60,7B-7E,A0-BF,D7,F7","00"),x="a-z"+st("DF-F6,F8-FF","00"),s="A-Z"+st("C0-D6,D8-DE","00"),z=function(d,p,S,R){return d=d||u,p=p||x,S=S||s,R=R||"A|An|And|As|At|But|By|En|For|If|In|Of|On|Or|The|To|Vs?\\.?|Via",{capitalize:new RegExp("(^|["+d+"])(["+p+"])","g"),pascal:new RegExp("(^|["+d+"])+(["+p+S+"])","g"),fill:new RegExp("["+d+"]+(.|$)","g"),sentence:new RegExp('(^\\s*|[\\?\\!\\.]+"?\\s+"?|,\\s+")(['+p+"])","g"),improper:new RegExp("\\b("+R+")\\b","g"),relax:new RegExp("([^"+S+"])(["+S+"]*)(["+S+"])(?=[^"+S+"]|$)","g"),upper:new RegExp("^[^"+p+"]+$"),hole:/[^\s]\s[^\s]/,apostrophe:/'/g,room:new RegExp("["+d+"]")}},M=z(),A={re:M,unicodes:st,regexps:z,types:[],up:String.prototype.toUpperCase,low:String.prototype.toLowerCase,cap:function(d){return A.up.call(d.charAt(0))+d.slice(1)},decap:function(d){return A.low.call(d.charAt(0))+d.slice(1)},deapostrophe:function(d){return d.replace(M.apostrophe,"")},fill:function(d,p,S){return null!=p&&(d=d.replace(M.fill,function(R,O){return O?p+O:""})),S&&(d=A.deapostrophe(d)),d},prep:function(d,p,S,R){if(d=null==d?"":d+"",!R&&M.upper.test(d)&&(d=A.low.call(d)),!p&&!M.hole.test(d)){var O=A.fill(d," ");M.hole.test(O)&&(d=O)}return!S&&!M.room.test(d)&&(d=d.replace(M.relax,A.relax)),d},relax:function(d,p,S,R){return p+" "+(S?S+" ":"")+R}},B={_:A,of:function(d){for(var p=0,S=A.types.length;p<S;p++)if(B[A.types[p]].apply(B,arguments)===d)return A.types[p]},flip:function(d){return d.replace(/\w/g,function(p){return(p==A.up.call(p)?A.low:A.up).call(p)})},random:function(d){return d.replace(/\w/g,function(p){return(Math.round(Math.random())?A.up:A.low).call(p)})},type:function(d,p){B[d]=p,A.types.push(d)}},rt={lower:function(d,p,S){return A.fill(A.low.call(A.prep(d,p)),p,S)},snake:function(d){return B.lower(d,"_",!0)},constant:function(d){return B.upper(d,"_",!0)},camel:function(d){return A.decap(B.pascal(d))},kebab:function(d){return B.lower(d,"-",!0)},upper:function(d,p,S){return A.fill(A.up.call(A.prep(d,p,!1,!0)),p,S)},capital:function(d,p,S){return A.fill(A.prep(d).replace(M.capitalize,function(R,O,q){return O+A.up.call(q)}),p,S)},header:function(d){return B.capital(d,"-",!0)},pascal:function(d){return A.fill(A.prep(d,!1,!0).replace(M.pascal,function(p,S,R){return A.up.call(R)}),"",!0)},title:function(d){return B.capital(d).replace(M.improper,function(p,S,R,O){return R>0&&R<O.lastIndexOf(" ")?A.low.call(p):p})},sentence:function(d,p,S){return d=B.lower(d).replace(M.sentence,function(R,O,q){return O+A.up.call(q)}),p&&p.forEach(function(R){d=d.replace(new RegExp("\\b"+B.lower(R)+"\\b","g"),A.cap)}),S&&S.forEach(function(R){d=d.replace(new RegExp("(\\b"+B.lower(R)+"\\. +)(\\w)"),function(O,q,Mt){return q+A.low.call(Mt)})}),d}};for(var H in rt.squish=rt.pascal,B.default=B,rt)B.type(H,rt[H]);var U="function"==typeof U?U:function(){};U(ne.exports?ne.exports=B:this.Case=B)}).call(this)}}]);